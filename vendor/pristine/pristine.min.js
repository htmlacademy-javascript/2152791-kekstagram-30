const imageUploadForm = document.querySelector('.img-upload__form');
const hashValue = document.querySelector('.text__hashtags');
const errorForm = document.querySelector('.img-upload__field-wrapper');

//Код ванильного JS, где все работает
imageUploadForm.addEventListener('submit', function(evt) {
  evt.preventDefault();

  if(!hashValue.value.startsWith('#')) {
    errorForm.classList.add('img-upload__field-wrapper--error');
    return;
  }

  this.submit();
});

/*
//Код пристина, который не работает (взял его с обучающих материалов академии)
const pristine = new Pristine(imageUploadForm, {
  classTo: 'text__hashtags',
  errorClass: 'img-upload__field-wrapper--error',
  successClass: '',
  errorTextParent: 'text__hashtags',
  errorTextTag: 'span',
  errorTextClass: ''
});

function validateHasgtag() {
  return !hashValue.value.startsWith('#');
}

pristine.addValidator(
  imageUploadForm.querySelector('.text__hashtags'),
  validateHasgtag,
  errorForm.classList.add('img-upload__field-wrapper--error'),
);

imageUploadForm.addEventListener('submit', (evt) => {
  evt.preventDefault();
  pristine.validate();
});
*/
